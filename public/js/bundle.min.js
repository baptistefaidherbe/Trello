!function t(e,o,d){function a(s,c){if(!o[s]){if(!e[s]){var i="function"==typeof require&&require;if(!c&&i)return i(s,!0);if(r)return r(s,!0);var n=new Error("Cannot find module '"+s+"'");throw n.code="MODULE_NOT_FOUND",n}var l=o[s]={exports:{}};e[s][0].call(l.exports,(function(t){return a(e[s][1][t]||t)}),l,l.exports,t,e,o,d)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<d.length;s++)a(d[s]);return a}({1:[function(t,e,o){const d=t("./utils"),a=t("./list"),r=t("./card");var s={init:function(){console.log("app.init !"),s.addListenerToActions()},addListenerToActions:()=>{document.getElementById("addListButton").addEventListener("click",a.showAddListModal);const t=document.querySelectorAll(".close");for(closeBtn of t)closeBtn.addEventListener("click",d.hideModals);a.getListsFromAPI(),document.querySelector("#addListModal > .modal-card > form").addEventListener("submit",a.handleAddListForm);const e=document.querySelectorAll(".addCard");for(addCard of e)addCard.addEventListener("click",r.showAddCardModal)}};document.addEventListener("DOMContentLoaded",s.init)},{"./card":2,"./list":3,"./utils":4}],2:[function(t,e,o){const d=t("./utils"),a={getCardsFromAPI:async t=>{const e={method:"GET",mode:"cors"};try{const o=await fetch(d.base_url+"/lists/"+t+"/cards",e),r=await o.json();for(const t of r.card)a.makeCardInDOM(t.text,t.list_id,t.color,t.id)}catch(t){console.error(t)}},handleTitleCardForm:async t=>{t.preventDefault();const e=new FormData(t.target),o=e.get("card_id"),a=e.get("text");console.log(o);const r={method:"PATCH",body:e,mode:"cors"};try{const e=await fetch(d.base_url+"/cards/"+o,r),s=t.target.closest(".box").getAttribute("data-card-id");if(document.querySelector(`[data-card-id="${s}"] #formCard`).classList.add("is-hidden"),document.querySelector(`[data-card-id="${s}"] #formCard`).classList.remove("is-active"),document.querySelector(`[data-card-id="${s}"] .contentCard`).classList.remove("is-hidden"),document.querySelector(`[data-card-id="${s}"] .contentCard`).classList.add("is-active"),document.querySelector(`[data-card-id="${s}"] .contentCard`).textContent=a,200!=e.status)throw`error with status ${e.status}`;console.log(e)}catch(t){console.error(t)}},editCard:t=>{const e=t.target.closest(".box").getAttribute("data-card-id");console.log(e),document.querySelector(`[data-card-id="${e}"] .contentCard`).classList.add("is-hidden"),document.querySelector(`[data-card-id="${e}"] #formCard`).classList.remove("is-hidden"),document.querySelector(`[data-card-id="${e}"] #formCard`).classList.add("is-active");const o=document.querySelectorAll("#formCard");for(formCard of o){const t=formCard.querySelector('input[name="card_id"]').value=e;document.querySelector(`[data-card-id="${t}"] #formCard`).addEventListener("submit",a.handleTitleCardForm)}},deleteCard:async t=>{const e=t.target.closest(".box"),o=e.getAttribute("data-card-id"),a={method:"DELETE",body:o,mode:"cors"};try{const t=await fetch(d.base_url+"/cards/"+o,a);if(200!=t.status)throw`error with status ${t.status}`;console.log(t)}catch(t){console.error(t)}e.remove()},showAddCardModal:t=>{const e=document.getElementById("addModalCard");document.getElementById("value_card_modal").value="",e.classList.add("is-active");const o=t.target.closest(".panel").getAttribute("data-list-id");document.querySelector('#addCardForm input[name="list_id"]').value=o;document.getElementById("addCardForm").addEventListener("submit",a.handleAddCardForm)},handleAddCardForm:async t=>{t.preventDefault();const e=new FormData(t.target),o={method:"POST",body:e};try{const t=await fetch(d.base_url+"/cards",o),r=await t.json();if(a.makeCardInDOM(e.get("text"),e.get("list_id"),e.get("color"),r.id),200!=t.status)throw`error with status ${t.status}`;console.log(t)}catch(t){console.error(t)}d.hideModals()},makeCardInDOM:(t,e,o,d)=>{const r=document.querySelector("#templateCard").content,s=document.importNode(r,!0);s.querySelector(".contentCard").textContent=t;const c=e,i=document.querySelector(`[data-list-id="${c}"]  .panel-block`),n=s.querySelector(".box");n.dataset.cardId=d,n.style.backgroundColor=o,i.appendChild(s),Sortable.create(i,{group:"list",animation:100,onChange:()=>{const t=document.querySelector('[draggable="false"]'),e=t.closest(".box").getAttribute("data-card-id"),o=t.closest(`[data-list-id="${c}"]`).getAttribute("data-list-id");a.UpdatePositionCardList(e,o)}});const l=document.querySelectorAll(".edit");for(edit of l)edit.addEventListener("click",a.editCard);const u=document.querySelectorAll(".deleteCard");for(deleteCard of u)deleteCard.addEventListener("click",a.deleteCard)},UpdatePositionCardList:async(t,e)=>{const o=parseInt(e,10),a=new FormData;a.append("list_id",o);const r={method:"PATCH",body:a};console.log(a.get("list_id"));try{const e=await fetch(d.base_url+"/cards/"+t,r),o=await e.json();if(console.log(o),200!=e.status)throw`error with status ${e.status}`;console.log(e)}catch(t){console.error(t)}}};e.exports=a},{"./utils":4}],3:[function(t,e,o){const d=t("./utils"),a=t("./card"),r={handleTitleListForm:async t=>{t.preventDefault();const e=new FormData(t.target),o=e.get("list_id"),a=e.get("name");console.log(o);const r={method:"PATCH",body:e,mode:"cors"};try{const e=await fetch(d.base_url+"/lists/"+o,r),s=t.target.closest(".panel").getAttribute("data-list-id");if(document.querySelector(`[data-list-id="${s}"] h2`).classList.remove("is-hidden"),document.querySelector(`[data-list-id="${s}"] h2`).classList.add("is-active"),document.querySelector(`[data-list-id="${s}"] #formList`).classList.add("is-hidden"),document.querySelector(`[data-list-id="${s}"] #formList`).classList.remove("is-active"),document.querySelector(`[data-list-id="${s}"] h2`).textContent=a,200!=e.status)throw`error with status ${e.status}`;console.log(e)}catch(t){console.error(t)}},editList:t=>{const e=t.target.closest(".panel").getAttribute("data-list-id");console.log(e),document.querySelector(`[data-list-id="${e}"] h2`).classList.add("is-hidden"),document.querySelector(`[data-list-id="${e}"] #formList`).classList.remove("is-hidden"),document.querySelector(`[data-list-id="${e}"] #formList`).classList.add("is-active");const o=document.querySelectorAll("#formList");for(formList of o){const t=formList.querySelector('input[name="list_id"]').value=e;document.querySelector(`[data-list-id="${t}"] #formList`).addEventListener("submit",r.handleTitleListForm)}},getListsFromAPI:async()=>{const t={method:"GET",mode:"cors"};try{const e=await fetch(d.base_url+"/lists",t),o=await e.json();for(const t of o.listAll)r.makeListInDOM(t.name,t.id),a.getCardsFromAPI(t.id)}catch(t){console.error(t)}},makeListInDOM:(t,e)=>{const o=document.querySelector("#templateList"),s=document.importNode(o.content,!0);s.querySelector("h2").textContent=t;s.querySelector(".is-one-quarter").dataset.listId=e;document.querySelector("#btnAddList").before(s),d.hideModals();const c=document.querySelectorAll(".addCard");for(addCard of c)addCard.addEventListener("click",a.showAddCardModal);const i=document.querySelectorAll("h2");for(edit of i)edit.addEventListener("dblclick",r.editList);document.querySelector("[data-list-id]").value=e;const n=document.querySelectorAll(".deleteList");for(deleteList of n)deleteList.addEventListener("click",r.deleteList)},deleteList:async t=>{const e=t.target.closest(".panel"),o=e.getAttribute("data-list-id"),a={method:"DELETE",body:o,mode:"cors"};try{const t=await fetch(d.base_url+"/lists/"+o,a);if(200!=t.status)throw`error with status ${t.status}`;console.log(t)}catch(t){console.error(t)}e.remove()},handleAddListForm:async t=>{t.preventDefault();const e=new FormData(t.target),o={method:"POST",body:e};try{const t=await fetch(d.base_url+"/lists",o),a=await t.json();r.makeListInDOM(e.get("name"),a.id)}catch(t){console.error(t)}d.hideModals()},showAddListModal:()=>{document.getElementById("addListModal").classList.add("is-active")}};e.exports=r},{"./card":2,"./utils":4}],4:[function(t,e,o){const d={base_url:"http://54.82.215.243:3000",hideModals:()=>{const t=document.getElementById("addListModal"),e=document.getElementById("addModalCard");t.classList.remove("is-active"),e.classList.remove("is-active")}};e.exports=d},{}]},{},[1]);
